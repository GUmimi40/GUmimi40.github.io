{"version":3,"sources":["../node_modules/_antd-mobile@2.3.1@antd-mobile/lib/calendar/locale/en_US.js","../node_modules/_rmc-calendar@1.1.4@rmc-calendar/lib/locale/en_US.js","../node_modules/_antd-mobile@2.3.1@antd-mobile/lib/calendar/locale/zh_CN.js","../node_modules/_rmc-calendar@1.1.4@rmc-calendar/lib/locale/zh_CN.js","scripts/views/housedetail/index.js","utils/history.js","utils/axios.js"],"names":["Object","defineProperty","exports","value","obj","_en_US","_en_US2","__esModule","module","title","today","month","year","am","pm","dateTimeFormat","dateFormat","noChoose","week","clear","selectTime","selectStartTime","selectEndTime","start","end","begin","over","begin_over","confirm","monthTitle","loadPrevMonth","yesterday","lastWeek","lastMonth","_zh_CN","_zh_CN2","alert","Modal","showAlert","text","onPress","console","log","style","history","push","extra","info","disable","now","Date","keys","forEach","key","date","Number","isNaN","HouseDetail","originbodyScrollY","document","getElementsByTagName","overflowY","onConfirm","startTime","endTime","setState","show","sessionStorage","toLocaleString","day","houseid","state","name","detail","pic","picture_url","city","localized_city","price","substring","startArr","axios","post","phone","userPhone","then","res","onCancel","undefined","getDateExtra","goback","go","showXinyuan","goXinyuan","xunyuansub","doStar","id","houses","userstarhouse","houseArr","star","cancelStar","ind","indexOf","splice","banner","toggle","config","topay","zh","en","locale","this","enUS","zhCN","Item","arrow","onClick","scrollTo","data","result","picture_urls","slice","setTimeout","get","params","startorder","eArr","endorder","sArr","item","i","className","autoplay","autoplayInterval","infinite","dotStyle","width","height","background","margin","dotActiveStyle","map","b","src","alt","verticalAlign","onLoad","window","dispatchEvent","Event","imgHeight","backgroundColor","kicker_content","messages","m","j","preview_tags","t","k","location_context","display_name","reviews","reviewer_image_url","localized_date","comments","user","renderBtn","visible","defaultDate","minDate","maxDate","Component","createHashHistory","defaults","baseURL","headers","common","interceptors","request","use","token","error","Promise","reject","response","msg","code"],"mappings":"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","file":"static/js/8.b3f243ab.chunk.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _en_US = require('rmc-calendar/lib/locale/en_US');\n\nvar _en_US2 = _interopRequireDefault(_en_US);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nexports['default'] = _en_US2['default'];\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nvar locale = {\n  title: 'Calendar',\n  today: 'Today',\n  month: 'Month',\n  year: 'Year',\n  am: 'AM',\n  pm: 'PM',\n  dateTimeFormat: 'MM/dd/yyyy w hh:mm',\n  dateFormat: 'yyyy/MM/dd w',\n  noChoose: 'No Choose',\n  week: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fir', 'Sat'],\n  clear: 'Clear',\n  selectTime: 'Select Time',\n  selectStartTime: 'Select Start Time',\n  selectEndTime: 'Select End Time',\n  start: 'Start',\n  end: 'End',\n  begin: 'Start',\n  over: 'End',\n  begin_over: 'S/E',\n  confirm: 'Confirm',\n  monthTitle: 'yyyy/MM',\n  loadPrevMonth: 'Load Prev Month',\n  yesterday: 'Yesterday',\n  lastWeek: 'Last Week',\n  lastMonth: 'Last Month'\n};\nexports['default'] = locale;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _zh_CN = require('rmc-calendar/lib/locale/zh_CN');\n\nvar _zh_CN2 = _interopRequireDefault(_zh_CN);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nexports['default'] = _zh_CN2['default'];\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nvar locale = {\n  title: '日期选择',\n  today: '今天',\n  month: '月',\n  year: '年',\n  am: '上午',\n  pm: '下午',\n  dateTimeFormat: 'yyyy年MM月dd日 星期w hh:mm',\n  dateFormat: 'yyyy年MM月dd日 星期w',\n  noChoose: '未选择',\n  week: ['日', '一', '二', '三', '四', '五', '六'],\n  clear: '清除',\n  selectTime: '选择时间',\n  selectStartTime: '选择开始时间',\n  selectEndTime: '选择结束时间',\n  start: '开始',\n  end: '结束',\n  begin: '起',\n  over: '止',\n  begin_over: '起/止',\n  confirm: '确认',\n  monthTitle: 'yyyy年MM月',\n  loadPrevMonth: '加载上一个月',\n  yesterday: '昨天',\n  lastWeek: '近一周',\n  lastMonth: '近一个月'\n};\nexports['default'] = locale;\nmodule.exports = exports['default'];","\r\nimport \"./index.scss\";\r\nimport {Carousel,Calendar,List} from 'antd-mobile';\r\nimport enUS from 'antd-mobile/lib/calendar/locale/en_US';\r\nimport zhCN from 'antd-mobile/lib/calendar/locale/zh_CN';\r\nimport {axios} from \"&/axios\";\r\nimport {history} from \"&/history\";\r\nimport {Modal} from 'antd-mobile';\r\nconst alert = Modal.alert;\r\nconst showAlert = () => {\r\n    const alertInstance = alert('您还没有登录', '是否前往登录页面', [\r\n      { text: '继续浏览', onPress: () => console.log('未登录'), style: 'default' },\r\n      { text: '前往登录', onPress: () => history.push(\"/login\") },\r\n    ]);\r\n};\r\nconst extra = {\r\n    '2017/07/15': { info: 'Disable', disable: true },\r\n};\r\nconst now = new Date();\r\nObject.keys(extra).forEach((key) => {\r\n    const info = extra[key];\r\n    const date = new Date(key);\r\n    if (!Number.isNaN(+date) && !extra[+date]) {\r\n      extra[+date] = info;\r\n    }\r\n});\r\n\r\nexport default class HouseDetail extends Component{\r\n    originbodyScrollY = document.getElementsByTagName('body')[0].style.overflowY;\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            houseid:sessionStorage.houseid,\r\n            detail:[],\r\n            banner:[],\r\n            toggle:false,\r\n            userstarhouse:[],\r\n            star:false,\r\n            show: false,\r\n            config: {},\r\n            startArr:[],\r\n            topay:true\r\n        }\r\n    }\r\n    renderBtn(zh, en, config = {}) {\r\n        config.locale = this.state.en ? enUS : zhCN;\r\n        return (\r\n          <List.Item arrow=\"horizontal\"\r\n            onClick={() => {\r\n                if(sessionStorage.userPhone){\r\n                    if(this.state.topay){\r\n                        document.getElementsByTagName('body')[0].style.overflowY = 'hidden';\r\n                        this.setState({\r\n                            show: true,\r\n                            config,\r\n                        })\r\n                    }else{\r\n                        alert(\"您已预订过该房源\")\r\n                    }\r\n                }else{\r\n                    showAlert();\r\n                }\r\n            }}\r\n          >\r\n            {this.state.en ? en : zh}\r\n          </List.Item>\r\n        );\r\n    }\r\n    onConfirm = (startTime, endTime) => {\r\n        document.getElementsByTagName('body')[0].style.overflowY = this.originbodyScrollY;\r\n        this.setState({\r\n            show: false,\r\n            startTime,\r\n            endTime,\r\n        });\r\n        sessionStorage.startTime = startTime.toLocaleString();\r\n        sessionStorage.endTime = endTime.toLocaleString();\r\n        sessionStorage.day = endTime - startTime;\r\n        if(sessionStorage.day < 1){\r\n            alert(\"不可选择当天退房\");\r\n        }else{\r\n            var obj = {\r\n                houseid: this.state.houseid,\r\n                name: this.state.detail.name,\r\n                pic: this.state.detail.picture_url,\r\n                city: this.state.detail.localized_city,\r\n                price: this.state.detail.price.substring(1)*1,\r\n                start: startTime.toLocaleString().substring(0,10),\r\n                end: endTime.toLocaleString().substring(0,10),\r\n                day: (endTime - startTime)/(24*60*60*1000)\r\n            };\r\n            // console.log(obj);\r\n            this.state.startArr.push(obj);\r\n            // console.log(this.state.startArr);\r\n            axios.post(\"/airbnb/userorder\",{\r\n                phone:sessionStorage.userPhone,\r\n                startArr:this.state.startArr\r\n            }).then(res=>{\r\n                history.push(\"/pay\");\r\n            })\r\n        }\r\n    }\r\n\r\n    onCancel = () => {\r\n        document.getElementsByTagName('body')[0].style.overflowY = this.originbodyScrollY;\r\n        this.setState({\r\n            show: false,\r\n            startTime: undefined,\r\n            endTime: undefined,\r\n        });\r\n    }\r\n    \r\n    getDateExtra = date => extra[+date];\r\n\r\n    goback=()=>{\r\n        history.go(-1);\r\n    }\r\n    componentDidMount(){\r\n        scrollTo(0, 0);\r\n        axios.post(\"/airbnb/housedetail\",{\r\n            id:this.state.houseid\r\n        }).then(res=>{\r\n            this.setState({\r\n                detail:res.data.result,\r\n                banner:res.data.result.picture_urls.slice(0,5),\r\n            })\r\n            setTimeout(()=>{\r\n                this.setState({\r\n                    toggle:true\r\n                })\r\n            },500)\r\n        });\r\n        if(sessionStorage.userPhone){\r\n            axios.get(\"/airbnb/userstars\",{\r\n                params:{\r\n                    phone:sessionStorage.userPhone\r\n                }\r\n            }).then(res=>{\r\n                this.setState({\r\n                    userstarhouse:res.data.result.houses\r\n                })\r\n                var ind = res.data.result.houses.indexOf(Number(sessionStorage.houseid));\r\n                if(ind!=-1){\r\n                    this.setState({\r\n                        star:true\r\n                    })\r\n                }\r\n            })\r\n            axios.get(\"/airbnb/order\",{\r\n                params:{\r\n                    phone:sessionStorage.userPhone\r\n                }\r\n            }).then(res=>{\r\n                if(res.data.result){\r\n                    this.setState({\r\n                        startArr: res.data.result.startorder\r\n                    })\r\n                    var eArr = res.data.result.endorder;\r\n                    var sArr = res.data.result.startorder;\r\n                    eArr.forEach((item,i)=>{\r\n                        if(item.houseid == sessionStorage.houseid){\r\n                            this.setState({\r\n                                topay: false\r\n                            })\r\n                        }\r\n                    })\r\n                    sArr.forEach((item,i)=>{\r\n                        if(item.houseid == sessionStorage.houseid){\r\n                            this.setState({\r\n                                topay: false\r\n                            })\r\n                        }\r\n                    })\r\n                    // console.log(this.state.topay);\r\n                }\r\n            })\r\n        }\r\n    }\r\n    showXinyuan = () => {\r\n        const alertInstance = alert('收藏成功', '是否前往心愿单', [\r\n          { text: '继续浏览', onPress: () => console.log(''), style: 'default' },\r\n          { text: '查看心愿', onPress: () => this.goXinyuan() },\r\n        ]);\r\n    }\r\n    goXinyuan=()=>{\r\n        sessionStorage.xunyuansub = 0;\r\n        history.push(\"/index/xinyuandan\");\r\n    }\r\n    doStar=id=>{\r\n        if(sessionStorage.userPhone){\r\n            var houses = this.state.userstarhouse;\r\n            houses.push(id);\r\n            axios.post(\"/airbnb/starhouse\",{\r\n                phone:sessionStorage.userPhone,\r\n                houseArr:houses\r\n            }).then(res=>{\r\n                this.setState({\r\n                    star:true\r\n                })\r\n                this.showXinyuan();\r\n            })\r\n        }else{\r\n            showAlert();\r\n        }\r\n    }\r\n    cancelStar=id=>{\r\n        var houses = this.state.userstarhouse;\r\n        var ind = houses.indexOf(id);\r\n        houses.splice(ind,1);\r\n        axios.post(\"/airbnb/starhouse\",{\r\n            phone:sessionStorage.userPhone,\r\n            houseArr:houses\r\n        }).then(res=>{\r\n            this.setState({\r\n                star:false\r\n            })\r\n        })\r\n    }\r\n    render(){\r\n        const {\r\n            detail,\r\n            banner,\r\n            toggle,\r\n            star\r\n        } = this.state;\r\n        return(\r\n            <div className=\"house_detail\">\r\n                <div className=\"house_img\">\r\n                    <Carousel\r\n                        autoplay={toggle}\r\n                        autoplayInterval={2000}\r\n                        infinite={true}\r\n                        dotStyle={{ width: '5px', height: '5px', background: '#fff', margin: '0 0.12rem 0.2rem'}}\r\n                        dotActiveStyle={{ background: '#fff', margin: '0 0.12rem 0.2rem'}}\r\n                    >\r\n                        {\r\n                           banner.map((b,i)=>{\r\n                                return(\r\n                                    <img key={i}\r\n                                    src={b}\r\n                                    alt=\"\"\r\n                                    style={{ width: '100%', height: '4.8rem', verticalAlign: 'top' }}\r\n                                    onLoad={() => {\r\n                                        window.dispatchEvent(new Event('resize'));\r\n                                        this.setState({ imgHeight: 'auto' });\r\n                                    }}\r\n                                    />\r\n                                )\r\n                            })\r\n                        }\r\n                    </Carousel>\r\n                    <div className=\"house_menu\">\r\n                        <div><i className=\"iconfont icon-back\" onClick={this.goback}></i></div>\r\n                        <div className=\"heart\">\r\n                            <i\r\n                                onClick={star?()=>this.cancelStar(detail.id):()=>this.doStar(detail.id)}\r\n                                style={{backgroundColor:star?\"rgba(255,90,96,0.8)\":\"\"}} className=\"iconfont icon-heart2e\">\r\n                            </i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"house_body\">\r\n                    <p className=\"kicker_content\">\r\n                        {detail.kicker_content&&\r\n                            detail.kicker_content.messages.map((m,j)=>{\r\n                                return <span key={j}>{m}</span>\r\n                            })\r\n                        }\r\n                    </p>\r\n                    <h2>{detail.name}</h2>\r\n                    <ul className=\"house_tags\">\r\n                        {detail.preview_tags&&\r\n                            detail.preview_tags.map((t,k)=>{\r\n                                return <li className={k==0?\"first\":\"\" || k==1?\"second\":\"\"} key={k}>{t.name}</li>\r\n                            })\r\n                        }\r\n                    </ul>\r\n                </div>\r\n                <div className=\"house_path house_box\">\r\n                    <h5>位置信息</h5>\r\n                    <p>{detail.location_context&&\r\n                        detail.location_context.display_name\r\n                    }</p>\r\n                </div>\r\n                <div className=\"house_comment house_box\">\r\n                    <h5>精华评论</h5>\r\n                    <div className=\"comment_hd\">\r\n                        <img src={detail.reviews &&\r\n                            detail.reviews[0].reviewer_image_url.substring(0,detail.reviews[0].reviewer_image_url.indexOf(\"?\"))\r\n                        } alt=\"\"/>\r\n                        <div className=\"comment_user\">\r\n                            <h5>\r\n                                {detail.reviews &&\r\n                                    detail.reviews[0].localized_date\r\n                                }\r\n                            </h5>\r\n                            <span>\r\n                                {detail.reviews &&\r\n                                    detail.reviews[0].localized_date\r\n                                }\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <p>\r\n                        {detail.reviews &&\r\n                            detail.reviews[0].comments\r\n                        }\r\n                    </p>\r\n                </div>\r\n                <div className=\"house_msg house_box\">\r\n                    <h5>入住与退房时间</h5>\r\n                    <p>14:00后入住，12:00退房</p>\r\n                </div>\r\n                <div className=\"house_master house_box\">\r\n                    <h5>房东</h5>\r\n                    <div className=\"master_info\">\r\n                        <div className=\"master_name\">\r\n                            <img src={detail.user&&\r\n                                detail.user.picture_url.substring(0,detail.user.picture_url.indexOf(\"?\"))\r\n                            } alt=\"\"/>\r\n                        </div>\r\n                        <div className=\"master_phone\">\r\n                            <h5>房东已认证</h5>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"house_last house_box\">\r\n                    <h5>退订政策</h5>\r\n                    <p>严格·48小时内可免费取消预订</p>\r\n                </div>\r\n                <div className=\"house_button\">\r\n                    <span><b>{detail.price}</b>每晚</span>\r\n                    {/* <button onClick={()=>this.renderBtn('', 'Select Date Range')}>立即预定</button> */}\r\n                    {this.renderBtn('立即预定', 'Select Date Range')}\r\n                </div>\r\n                <Calendar\r\n                {...this.state.config}\r\n                visible={this.state.show}\r\n                onCancel={this.onCancel}\r\n                onConfirm={this.onConfirm}\r\n                getDateExtra={this.getDateExtra}\r\n                defaultDate={now}\r\n                minDate={new Date(+now - 5184000000)}\r\n                maxDate={new Date(+now + 31536000000)}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}","import {createHashHistory} from \"history\";\r\n\r\nconst history = new createHashHistory();\r\n\r\nexport {history};","\r\n\r\n\r\nimport axios from \"axios\";\r\n\r\n// axios.defaults.baseURL = \"http://localhost:2019/\";\r\naxios.defaults.baseURL = \"https://arthasic.top:6918\";\r\n\r\n\r\nlet token = \"\";\r\naxios.defaults.headers.common['token'] = token;    // token \r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\nimport {Toast,Modal } from \"antd-mobile\"\r\nimport {history} from \"./history\"\r\n\r\nconst alert = Modal.alert;\r\nconst showAlert = () => {\r\n    const alertInstance = alert('登录提示', '你确定是否前往登陆', [\r\n      { text: '我就看看', onPress: () => console.log('游客访问'), style: 'default' },\r\n      { text: '马上登录', onPress: () => history.push(\"/login\") },\r\n    ]);\r\n    setTimeout(() => {\r\n      // 可以调用close方法以在外部close\r\n      console.log('auto close');\r\n      alertInstance.close();\r\n    }, 500000);\r\n};\r\n\r\nexport function loadingToast(msg) {\r\n    // Toast.hide();\r\n    // Toast.loading(msg, 1, () => {\r\n    //   console.log('Load complete !!!');\r\n    // });\r\n}\r\n\r\nexport function failToast(msg) {\r\n    // Toast.hide();\r\n    // Toast.fail(msg, 1);\r\n}\r\n\r\nexport function showToast(msg) {\r\n    // Toast.hide();\r\n    // Toast.info(msg, 1);\r\n}\r\n\r\n// 拦截器配置    Interceptors \r\n// 发送请求之前 添加拦截器  \r\naxios.interceptors.request.use(function (config) {\r\n    // 发送之前做的事情 \r\n    // loadingToast(\"请求中\");\r\n    config.headers['token'] =  sessionStorage.token;\r\n    // console.log(config);\r\n\r\n    return config;\r\n}, function (error) {\r\n    // 发送失败 做的失败 \r\n    // failToast(\"请求失败\")\r\n    return Promise.reject(error);\r\n});\r\n\r\n// 响应数据 的拦截器 \r\naxios.interceptors.response.use(function (response) {\r\n    // 成功接收到数据 \r\n    // console.log(response);\r\n    setTimeout(()=>{\r\n        showToast(response.data.msg);\r\n        if(response.data.code==500){\r\n            // showAlert();\r\n        }\r\n    },500)\r\n    return response;\r\n}, function (error) {\r\n    // failToast(\"响应失败\");\r\n    // 无法接收到数据  \r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\nexport  {axios};\r\n\r\n"],"sourceRoot":""}