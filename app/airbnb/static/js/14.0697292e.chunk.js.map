{"version":3,"sources":["assets/airbnb1.png","scripts/views/wode/index.js","utils/history.js","utils/axios.js"],"names":["module","exports","Wode","gotoLogin","sessionStorage","status","history","push","goOrder","num","sub","alreadyLogin","handleClick","inp","click","upload","file","files","data","FormData","append","state","phone","axios","post","then","res","setState","pic","replace","localStorage","avatar","userPhone","name","require","toggle","scrollTo","this","get","params","r","lastname","mobile","className","style","display","onClick","src","alt","ref","el","onChange","type","Component","createHashHistory","defaults","baseURL","headers","common","Modal","alert","interceptors","request","use","config","token","error","Promise","reject","response","setTimeout","msg","code"],"mappings":"0FAAAA,EAAOC,QAAU,IAA0B,qC,mKCItBC,E,YACjB,aAAc,IAAD,8BACT,+CAoCJC,UAAU,WACNC,eAAeC,OAAS,EACxBC,IAAQC,KAAK,WAvCJ,EAyCbC,QAAQ,SAAAC,GACJL,eAAeM,IAAMD,EACrBH,IAAQC,KAAK,WA3CJ,EA6CbI,aAAa,aA7CA,EAgDbC,YAAY,WACR,EAAKC,IAAIC,SAjDA,EAmDbC,OAAO,WACH,IAAIC,EAAO,EAAKH,IAAII,MAAM,GACtBC,EAAO,IAAIC,SACfD,EAAKE,OAAO,SAASJ,GACrBE,EAAKE,OAAO,SAAS,EAAKC,MAAMC,OAChCC,IAAMC,KAAK,iBAAiBN,GAAMO,MAAK,SAAAC,GACnC,EAAKC,SAAS,CACVC,IAAIF,EAAIR,KAAKU,IAAIC,QAAQ,SAAS,+BAEtCC,aAAaC,OAAS,EAAKV,MAAMO,QA1DrC,EAAKP,MAAQ,CACTC,MAAMlB,eAAe4B,UACrBC,KAAK,GACLL,IAAKM,EAAQ,KACbC,QAAO,GANF,E,iFASO,IAAD,OACfC,SAAS,EAAE,GACRC,KAAKhB,MAAMC,QACVe,KAAKV,SAAS,CACVQ,QAAO,IAEXZ,IAAMe,IAAI,gBAAgB,CACtBC,OAAO,CACHjB,MAAMe,KAAKhB,MAAMC,SAEtBG,MAAK,SAAAC,GACDA,EAAIR,KAAKsB,EAAE,GAAGT,QACb,EAAKJ,SAAS,CACVC,IAAIF,EAAIR,KAAKsB,EAAE,GAAGT,OAAOF,QAAQ,SAAS,+BAG/CH,EAAIR,KAAKsB,EAAE,GAAGC,SACb,EAAKd,SAAS,CACVM,KAAKP,EAAIR,KAAKsB,EAAE,GAAGC,WAGvB,EAAKd,SAAS,CACVM,KAAKP,EAAIR,KAAKsB,EAAE,GAAGE,e,+BAgC9B,IAAD,SAIAL,KAAKhB,MAFLY,EAFA,EAEAA,KACAE,EAHA,EAGAA,OAEJ,OACI,2BACI,uBAAKQ,UAAU,UAAUC,MAAO,CAACC,QAASV,EAAU,OAAH,KAC7C,qBAAGQ,UAAU,uCACb,kEACA,0BAAQG,QAAST,KAAKlC,WAAtB,mCAEJ,uBAAKwC,UAAU,OAAOC,MAAO,CAACC,QAAQV,EAAO,GAAG,SAC5C,uBAAKQ,UAAU,WACX,0BAAKV,GACL,uBAAKU,UAAU,eACX,uBAAKI,IAAKV,KAAKhB,MAAMO,IAAKkB,QAAST,KAAKzB,YAAaoC,IAAI,KACzD,yBAAOC,IAAK,SAAAC,GAAE,OAAE,EAAKrC,IAAIqC,GAAIC,SAAUd,KAAKtB,OAAQqC,KAAK,WAGjE,uBAAKT,UAAU,cACX,kEACA,0BACI,sBAAIG,QAAS,kBAAI,EAAKtC,QAAQ,KAC1B,yBAAG,qBAAGmC,UAAU,2BAChB,sDAEJ,sBAAIG,QAAS,kBAAI,EAAKtC,QAAQ,KAC1B,yBAAG,qBAAGmC,UAAU,2BAChB,sDAEJ,sBAAIG,QAAS,kBAAI,EAAKtC,QAAQ,KAC1B,yBAAG,qBAAGmC,UAAU,2BAChB,8DAIZ,sBAAIA,UAAU,aACV,0BACI,yCACA,qBAAGA,UAAU,wBAEjB,0BACI,6EACA,qBAAGA,UAAU,wBAEjB,0BACI,qDACA,qBAAGA,UAAU,wBAEjB,0BACI,qDACA,qBAAGA,UAAU,wBAEjB,0BACI,qDACA,qBAAGA,UAAU,wBAEjB,0BACI,qDACA,qBAAGA,UAAU,wBAEjB,0BACI,2DACA,qBAAGA,UAAU,+B,GAhIPU,I,sFCJlC,sCAEM/C,EAAU,IAFhB,KAEoBgD,I,gCCCpB,2EAGA/B,IAAMgC,SAASC,QAAU,4BAIzBjC,IAAMgC,SAASE,QAAQC,OAAvB,MADY,GAEZnC,IAAMgC,SAASE,QAAQjC,KAAK,gBAAkB,oCAKhCmC,IAAMC,MAgCpBrC,IAAMsC,aAAaC,QAAQC,KAAI,SAAUC,GAMrC,OAHAA,EAAOP,QAAP,MAA2BrD,eAAe6D,MAGnCD,KACR,SAAUE,GAGT,OAAOC,QAAQC,OAAOF,MAI1B3C,IAAMsC,aAAaQ,SAASN,KAAI,SAAUM,GAStC,OANAC,YAAW,WACGD,EAASnD,KAAKqD,IACrBF,EAASnD,KAAKsD,OAGnB,KACKH,KACR,SAAUH,GAGT,OAAOC,QAAQC,OAAOF","file":"static/js/14.0697292e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/airbnb1.b26eccd2.png\";","import \"./index.scss\";\r\nimport {history} from \"&/history\";\r\nimport {axios} from \"&/axios\";\r\n\r\nexport default class Wode extends Component{\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            phone:sessionStorage.userPhone,\r\n            name:\"\",\r\n            pic: require(\"@/assets/airbnb1.png\"),\r\n            toggle:false\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        scrollTo(0,0);\r\n        if(this.state.phone){\r\n            this.setState({\r\n                toggle:true\r\n            })\r\n            axios.get(\"/airbnb/login\",{\r\n                params:{\r\n                    phone:this.state.phone\r\n                }\r\n            }).then(res=>{\r\n                if(res.data.r[0].avatar){\r\n                    this.setState({\r\n                        pic:res.data.r[0].avatar.replace(/public/,'http://47.103.193.99:6918')\r\n                    })\r\n                }\r\n                if(res.data.r[0].lastname){\r\n                    this.setState({\r\n                        name:res.data.r[0].lastname\r\n                    })\r\n                }else{\r\n                    this.setState({\r\n                        name:res.data.r[0].mobile\r\n                    })\r\n                };\r\n            })\r\n        }\r\n    }\r\n    gotoLogin=()=>{\r\n        sessionStorage.status = 1;\r\n        history.push(\"/login\")\r\n    }\r\n    goOrder=num=>{\r\n        sessionStorage.sub = num;\r\n        history.push(\"/order\");\r\n    }\r\n    alreadyLogin=()=>{\r\n\r\n    }\r\n    handleClick=()=>{\r\n        this.inp.click();\r\n    }\r\n    upload=()=>{\r\n        let file = this.inp.files[0];\r\n        let data = new FormData();\r\n        data.append(\"avatar\",file);\r\n        data.append(\"mobile\",this.state.phone);\r\n        axios.post(\"/airbnb/avatar\",data).then(res=>{\r\n            this.setState({\r\n                pic:res.data.pic.replace(/public/,'http://47.103.193.99:6918')\r\n            })\r\n            localStorage.avatar = this.state.pic;\r\n        })\r\n    }\r\n    render(){\r\n        const {\r\n            name,\r\n            toggle\r\n        } = this.state;\r\n        return (\r\n            <div>\r\n                <div className=\"nologin\" style={{display:!toggle?\"\":\"none\"}}>\r\n                    <i className=\"iconfont icon-xiugaigerentouxiang-\"></i>\r\n                    <h2>您还没有登录</h2>\r\n                    <button onClick={this.gotoLogin}>加入爱彼迎</button>\r\n                </div>\r\n                <div className=\"mine\" style={{display:toggle?\"\":\"none\"}}>\r\n                    <div className=\"mine_hd\">\r\n                        <h2>{name}</h2>\r\n                        <div className=\"mine_avatar\">\r\n                            <img src={this.state.pic} onClick={this.handleClick} alt=\"\" />\r\n                            <input ref={el=>this.inp=el} onChange={this.upload} type=\"file\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"mine_order\">\r\n                        <h2>我的房源订单</h2>\r\n                        <ul>\r\n                            <li onClick={()=>this.goOrder(0)}>\r\n                                <p><i className=\"iconfont icon-dingdan\"></i></p>\r\n                                <p>全部订单</p>\r\n                            </li>\r\n                            <li onClick={()=>this.goOrder(1)}>\r\n                                <p><i className=\"iconfont icon-dingdan\"></i></p>\r\n                                <p>有效订单</p>\r\n                            </li>\r\n                            <li onClick={()=>this.goOrder(2)}>\r\n                                <p><i className=\"iconfont icon-dingdan\"></i></p>\r\n                                <p>待支付订单</p>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <ul className=\"mine_menu\">\r\n                        <li>\r\n                            <p>行程</p>\r\n                            <i className=\"iconfont icon-help\"></i>\r\n                        </li>\r\n                        <li>\r\n                            <p>旅行基金和礼金券</p>\r\n                            <i className=\"iconfont icon-help\"></i>\r\n                        </li>\r\n                        <li>\r\n                            <p>邀请好友</p>\r\n                            <i className=\"iconfont icon-help\"></i>\r\n                        </li>\r\n                        <li>\r\n                            <p>发布房源</p>\r\n                            <i className=\"iconfont icon-help\"></i>\r\n                        </li>\r\n                        <li>\r\n                            <p>开展体验</p>\r\n                            <i className=\"iconfont icon-help\"></i>\r\n                        </li>\r\n                        <li>\r\n                            <p>获取帮助</p>\r\n                            <i className=\"iconfont icon-help\"></i>\r\n                        </li>\r\n                        <li>\r\n                            <p>向我们反馈</p>\r\n                            <i className=\"iconfont icon-help\"></i>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import {createHashHistory} from \"history\";\r\n\r\nconst history = new createHashHistory();\r\n\r\nexport {history};","\r\n\r\n\r\nimport axios from \"axios\";\r\n\r\n// axios.defaults.baseURL = \"http://localhost:2019/\";\r\naxios.defaults.baseURL = \"https://arthasic.top:6918\";\r\n\r\n\r\nlet token = \"\";\r\naxios.defaults.headers.common['token'] = token;    // token \r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\nimport {Toast,Modal } from \"antd-mobile\"\r\nimport {history} from \"./history\"\r\n\r\nconst alert = Modal.alert;\r\nconst showAlert = () => {\r\n    const alertInstance = alert('登录提示', '你确定是否前往登陆', [\r\n      { text: '我就看看', onPress: () => console.log('游客访问'), style: 'default' },\r\n      { text: '马上登录', onPress: () => history.push(\"/login\") },\r\n    ]);\r\n    setTimeout(() => {\r\n      // 可以调用close方法以在外部close\r\n      console.log('auto close');\r\n      alertInstance.close();\r\n    }, 500000);\r\n};\r\n\r\nexport function loadingToast(msg) {\r\n    // Toast.hide();\r\n    // Toast.loading(msg, 1, () => {\r\n    //   console.log('Load complete !!!');\r\n    // });\r\n}\r\n\r\nexport function failToast(msg) {\r\n    // Toast.hide();\r\n    // Toast.fail(msg, 1);\r\n}\r\n\r\nexport function showToast(msg) {\r\n    // Toast.hide();\r\n    // Toast.info(msg, 1);\r\n}\r\n\r\n// 拦截器配置    Interceptors \r\n// 发送请求之前 添加拦截器  \r\naxios.interceptors.request.use(function (config) {\r\n    // 发送之前做的事情 \r\n    // loadingToast(\"请求中\");\r\n    config.headers['token'] =  sessionStorage.token;\r\n    // console.log(config);\r\n\r\n    return config;\r\n}, function (error) {\r\n    // 发送失败 做的失败 \r\n    // failToast(\"请求失败\")\r\n    return Promise.reject(error);\r\n});\r\n\r\n// 响应数据 的拦截器 \r\naxios.interceptors.response.use(function (response) {\r\n    // 成功接收到数据 \r\n    // console.log(response);\r\n    setTimeout(()=>{\r\n        showToast(response.data.msg);\r\n        if(response.data.code==500){\r\n            // showAlert();\r\n        }\r\n    },500)\r\n    return response;\r\n}, function (error) {\r\n    // failToast(\"响应失败\");\r\n    // 无法接收到数据  \r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\nexport  {axios};\r\n\r\n"],"sourceRoot":""}