{"version":3,"sources":["scripts/views/account/index.js","utils/history.js","utils/axios.js"],"names":["alert","Modal","User","goBack","history","go","checkAccount","phone","value","placeholder","pwd","axios","post","then","res","data","type","sessionStorage","userPhone","username","r","lastname","push","className","onClick","this","ref","el","Component","createHashHistory","defaults","baseURL","headers","common","interceptors","request","use","config","token","error","Promise","reject","response","setTimeout","msg","code"],"mappings":"8PAGMA,E,MAAQC,EAAMD,MAGCE,E,YACjB,aAAc,IAAD,8BACT,+CAEJC,OAAO,WACHC,IAAQC,IAAI,IAJH,EAMbC,aAAa,WACL,EAAKC,MAAMC,QACX,EAAKD,MAAME,YAAc,oDAEzB,EAAKC,IAAIF,QACT,EAAKE,IAAID,YAAc,wCAExB,EAAKF,MAAMC,OAAO,EAAKE,IAAIF,OAC1BG,IAAMC,KAAK,kBAAkB,CACzBL,MAAM,EAAKA,MAAMC,MACjBE,IAAI,EAAKA,IAAIF,QACdK,MAAK,SAAAC,GAEgB,GAAjBA,EAAIC,KAAKC,KACRhB,EAAM,oDAEc,GAAjBc,EAAIC,KAAKC,KACZhB,EAAM,iEAEFiB,eAAeC,UAAY,EAAKX,MAAMC,MACtCS,eAAeE,SAAWL,EAAIC,KAAKK,EAAE,GAAGC,SACxCjB,IAAQkB,KAAK,oBA3BpB,E,sEAiCJ,IAAD,OACJ,OACI,uBAAKC,UAAU,QACX,uBAAKA,UAAU,gBACX,qBAAGC,QAASC,KAAKtB,OAAQoB,UAAU,wBAEvC,uBAAKA,UAAU,aACX,kEACA,sJAEJ,uBAAKA,UAAU,aACX,qDACA,yBAAOG,IAAK,SAAAC,GAAE,OAAE,EAAKpB,MAAMoB,GAAIX,KAAK,WACpC,yCACA,yBAAOU,IAAK,SAAAC,GAAE,OAAE,EAAKjB,IAAIiB,GAAIX,KAAK,aAClC,0BAAQQ,QAASC,KAAKnB,cAAtB,kC,GAjDcsB,I,gECNlC,sCAEMxB,EAAU,IAFhB,KAEoByB,I,gCCCpB,2EAGAlB,IAAMmB,SAASC,QAAU,4BAIzBpB,IAAMmB,SAASE,QAAQC,OAAvB,MADY,GAEZtB,IAAMmB,SAASE,QAAQpB,KAAK,gBAAkB,oCAKhCX,IAAMD,MAgCpBW,IAAMuB,aAAaC,QAAQC,KAAI,SAAUC,GAMrC,OAHAA,EAAOL,QAAP,MAA2Bf,eAAeqB,MAGnCD,KACR,SAAUE,GAGT,OAAOC,QAAQC,OAAOF,MAI1B5B,IAAMuB,aAAaQ,SAASN,KAAI,SAAUM,GAStC,OANAC,YAAW,WACGD,EAAS3B,KAAK6B,IACrBF,EAAS3B,KAAK8B,OAGnB,KACKH,KACR,SAAUH,GAGT,OAAOC,QAAQC,OAAOF","file":"static/js/17.0c6c4cbf.chunk.js","sourcesContent":["import \"./index.scss\";\r\nimport {history} from \"&/history\";\r\nimport {axios} from \"&/axios\";\r\nconst alert = Modal.alert;\r\nimport { Modal } from 'antd-mobile';\r\n\r\nexport default class User extends Component{\r\n    constructor(){\r\n        super();\r\n    }\r\n    goBack=()=>{\r\n        history.go(-1);\r\n    }\r\n    checkAccount=()=>{\r\n        if(!this.phone.value){\r\n            this.phone.placeholder = \"请输入手机号码！\";\r\n        }\r\n        if(!this.pwd.value){\r\n            this.pwd.placeholder = \"请输入密码！\";\r\n        }\r\n        if(this.phone.value&&this.pwd.value){\r\n            axios.post(\"/airbnb/account\",{\r\n                phone:this.phone.value,\r\n                pwd:this.pwd.value\r\n            }).then(res=>{\r\n                // console.log(res);\r\n                if(res.data.type == 0){\r\n                    alert(\"该手机号尚未注册\");\r\n                }else{\r\n                    if(res.data.type == 2){\r\n                    alert(\"密码错误，请重新输入\");\r\n                    }else{\r\n                        sessionStorage.userPhone = this.phone.value;\r\n                        sessionStorage.username = res.data.r[0].lastname;\r\n                        history.push(\"/index/wode\");\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n    render(){\r\n        return (\r\n            <div className=\"user\">\r\n                <div className=\"login_header\">\r\n                    <i onClick={this.goBack} className=\"iconfont icon-back\"></i>\r\n                </div>\r\n                <div className=\"login_txt\">\r\n                    <h2>账号密码登录</h2>\r\n                    <p>（未注册的用户请先通过手机验证码注册！）</p>\r\n                </div>\r\n                <div className=\"login_inp\">\r\n                    <p>手机号码</p>\r\n                    <input ref={el=>this.phone=el} type=\"number\"/>\r\n                    <p>密码</p>\r\n                    <input ref={el=>this.pwd=el} type=\"password\"/>\r\n                    <button onClick={this.checkAccount} >立即登录</button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import {createHashHistory} from \"history\";\r\n\r\nconst history = new createHashHistory();\r\n\r\nexport {history};","\r\n\r\n\r\nimport axios from \"axios\";\r\n\r\n// axios.defaults.baseURL = \"http://localhost:2019/\";\r\naxios.defaults.baseURL = \"https://arthasic.top:6918\";\r\n\r\n\r\nlet token = \"\";\r\naxios.defaults.headers.common['token'] = token;    // token \r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\nimport {Toast,Modal } from \"antd-mobile\"\r\nimport {history} from \"./history\"\r\n\r\nconst alert = Modal.alert;\r\nconst showAlert = () => {\r\n    const alertInstance = alert('登录提示', '你确定是否前往登陆', [\r\n      { text: '我就看看', onPress: () => console.log('游客访问'), style: 'default' },\r\n      { text: '马上登录', onPress: () => history.push(\"/login\") },\r\n    ]);\r\n    setTimeout(() => {\r\n      // 可以调用close方法以在外部close\r\n      console.log('auto close');\r\n      alertInstance.close();\r\n    }, 500000);\r\n};\r\n\r\nexport function loadingToast(msg) {\r\n    // Toast.hide();\r\n    // Toast.loading(msg, 1, () => {\r\n    //   console.log('Load complete !!!');\r\n    // });\r\n}\r\n\r\nexport function failToast(msg) {\r\n    // Toast.hide();\r\n    // Toast.fail(msg, 1);\r\n}\r\n\r\nexport function showToast(msg) {\r\n    // Toast.hide();\r\n    // Toast.info(msg, 1);\r\n}\r\n\r\n// 拦截器配置    Interceptors \r\n// 发送请求之前 添加拦截器  \r\naxios.interceptors.request.use(function (config) {\r\n    // 发送之前做的事情 \r\n    // loadingToast(\"请求中\");\r\n    config.headers['token'] =  sessionStorage.token;\r\n    // console.log(config);\r\n\r\n    return config;\r\n}, function (error) {\r\n    // 发送失败 做的失败 \r\n    // failToast(\"请求失败\")\r\n    return Promise.reject(error);\r\n});\r\n\r\n// 响应数据 的拦截器 \r\naxios.interceptors.response.use(function (response) {\r\n    // 成功接收到数据 \r\n    // console.log(response);\r\n    setTimeout(()=>{\r\n        showToast(response.data.msg);\r\n        if(response.data.code==500){\r\n            // showAlert();\r\n        }\r\n    },500)\r\n    return response;\r\n}, function (error) {\r\n    // failToast(\"响应失败\");\r\n    // 无法接收到数据  \r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\nexport  {axios};\r\n\r\n"],"sourceRoot":""}