{"version":3,"sources":["scripts/views/search/index.js","utils/history.js","utils/axios.js"],"names":["tabs1","txt","tabs2","Search","doCancel","history","push","switchTab","flag","setState","toggle","state","searchTab","val","searchList","sessionStorage","search","JSON","parse","indexOf","unshift","stringify","city","goSubmit","this","className","placeholder","onSubmit","value","onCancel","showCancelButton","map","s","i","onChange","key","onClick","style","display","tab","Component","createHashHistory","axios","defaults","baseURL","headers","common","post","Modal","alert","interceptors","request","use","config","token","error","Promise","reject","response","setTimeout","data","msg","code"],"mappings":"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","file":"static/js/21.53d58c0e.chunk.js","sourcesContent":["import \"./index.scss\";\r\nimport { SearchBar , Tag } from \"antd-mobile\";\r\nimport { history } from \"&/history\";\r\nimport { axios } from \"&/axios\";\r\n// import { connect } from \"react-redux\";\r\n// import { testing } from \"@/scripts/actions\"\r\n  \r\nconst tabs1 = [\r\n    {txt:\"武汉\"},\r\n    {txt:\"上海\"},\r\n    {txt:\"长沙\"},\r\n    {txt:\"重庆\"},\r\n    {txt:\"南京\"},\r\n    {txt:\"成都\"},\r\n    {txt:\"广州\"},\r\n    {txt:\"北京\"},\r\n]\r\nconst tabs2 = [\r\n    {txt:\"大阪\"},\r\n    {txt:\"东京\"},\r\n    {txt:\"台北\"},\r\n    {txt:\"香港\"},\r\n    {txt:\"京都\"},\r\n    {txt:\"曼谷\"},\r\n    {txt:\"首尔\"},\r\n    {txt:\"清迈\"},\r\n]\r\n\r\n// @connect(\r\n//     state=>{\r\n//         return{\r\n//             count:state.getIn([\"data\",\"count\"]),\r\n//             msg:state.getIn([\"data\",\"msg\"])\r\n//         }\r\n//     }\r\n// )\r\nexport default class Search extends Component{\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            toggle:true,\r\n            search:[]\r\n        }\r\n    }\r\n    doCancel=()=>{\r\n        history.push(\"/index/tansuo\");\r\n    }\r\n    switchTab=(flag)=>{\r\n        if(!flag){\r\n            this.setState({\r\n                toggle:!this.state.toggle,\r\n            })\r\n        }\r\n\r\n    }\r\n    searchTab=val=>{\r\n        if(sessionStorage.search){\r\n            var searchList = JSON.parse(sessionStorage.search);\r\n            if(searchList.indexOf(val) == -1){\r\n                searchList.unshift(val);\r\n            }\r\n        }else{\r\n            var searchList = [];\r\n            searchList.unshift(val);\r\n        }\r\n        sessionStorage.search = JSON.stringify(searchList);\r\n        sessionStorage.city = val;\r\n        history.push(\"/houses\");\r\n    }\r\n    goSubmit=val=>{\r\n        if(sessionStorage.search){\r\n            var searchList = JSON.parse(sessionStorage.search);\r\n            if(searchList.indexOf(val) == -1){\r\n                searchList.unshift(val);\r\n            }\r\n        }else{\r\n            var searchList = [];\r\n            searchList.unshift(val);\r\n        }\r\n        sessionStorage.search = JSON.stringify(searchList);\r\n        sessionStorage.city = val;\r\n        history.push(\"/houses\");\r\n    }\r\n    componentDidMount(){\r\n        if(sessionStorage.search){\r\n            this.setState({\r\n                search:JSON.parse(sessionStorage.search),\r\n            })\r\n        }else{\r\n            this.setState({\r\n                search:[\"北京\"]\r\n            })\r\n        }\r\n    }\r\n    render(){\r\n        const {\r\n            toggle,\r\n            search\r\n        } = this.state;\r\n        // const {\r\n        //     count,\r\n        //     msg,\r\n        //     dispatch\r\n        // } = this.props;\r\n        // console.log(this.state);\r\n        return (\r\n            <div>\r\n                {/* <button onClick={()=>dispatch(testing(50))}>{count}/{msg}</button> */}\r\n                <div className=\"searchbox\">\r\n                    <div className=\"wrapper\">\r\n                        <SearchBar\r\n                            placeholder=\"搜「北京」试试\"\r\n                            onSubmit={value=>this.goSubmit(value)}\r\n                            onCancel={this.doCancel}\r\n                            showCancelButton\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"searchList\">\r\n                    <div className=\"wrapper\">\r\n                        <div className=\"history\">\r\n                            <p>最近搜索</p>\r\n                            {search &&\r\n                                search.map((s,i)=>{\r\n                                    return <Tag onChange={()=>this.searchTab(s)} key={i}>{s}</Tag>\r\n                                })\r\n                            }\r\n                        </div>\r\n                        <div className=\"searchtabs\">\r\n                            <div className=\"title\">\r\n                                <span className={toggle?\"on\":\"\"} onClick={()=>this.switchTab(toggle)}>国内热门目的地</span>\r\n                                <span className={toggle?\"right\":\"right on\"} onClick={()=>this.switchTab(!toggle)}>海外及港澳台热门目的地</span>\r\n                            </div>\r\n                            <div style={{display:toggle?\"block\":\"none\"}} className=\"tabs\">\r\n                                {\r\n                                    tabs1.map((tab,i)=>{\r\n                                        return <Tag key={i} onChange={()=>this.searchTab(tab.txt)}>{tab.txt}</Tag>\r\n                                    })\r\n                                }\r\n                            </div>\r\n                            <div style={{display:!toggle?\"block\":\"none\"}} className=\"tabs\">\r\n                                {\r\n                                    tabs2.map((tab,i)=>{\r\n                                        return <Tag key={i} onChange={()=>this.searchTab(tab.txt)}>{tab.txt}</Tag>\r\n                                    })\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import {createHashHistory} from \"history\";\r\n\r\nconst history = new createHashHistory();\r\n\r\nexport {history};","\r\n\r\n\r\nimport axios from \"axios\";\r\n\r\n// axios.defaults.baseURL = \"http://localhost:2019/\";\r\naxios.defaults.baseURL = \"https://arthasic.top:6918\";\r\n\r\n\r\nlet token = \"\";\r\naxios.defaults.headers.common['token'] = token;    // token \r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\nimport {Toast,Modal } from \"antd-mobile\"\r\nimport {history} from \"./history\"\r\n\r\nconst alert = Modal.alert;\r\nconst showAlert = () => {\r\n    const alertInstance = alert('登录提示', '你确定是否前往登陆', [\r\n      { text: '我就看看', onPress: () => console.log('游客访问'), style: 'default' },\r\n      { text: '马上登录', onPress: () => history.push(\"/login\") },\r\n    ]);\r\n    setTimeout(() => {\r\n      // 可以调用close方法以在外部close\r\n      console.log('auto close');\r\n      alertInstance.close();\r\n    }, 500000);\r\n};\r\n\r\nexport function loadingToast(msg) {\r\n    // Toast.hide();\r\n    // Toast.loading(msg, 1, () => {\r\n    //   console.log('Load complete !!!');\r\n    // });\r\n}\r\n\r\nexport function failToast(msg) {\r\n    // Toast.hide();\r\n    // Toast.fail(msg, 1);\r\n}\r\n\r\nexport function showToast(msg) {\r\n    // Toast.hide();\r\n    // Toast.info(msg, 1);\r\n}\r\n\r\n// 拦截器配置    Interceptors \r\n// 发送请求之前 添加拦截器  \r\naxios.interceptors.request.use(function (config) {\r\n    // 发送之前做的事情 \r\n    // loadingToast(\"请求中\");\r\n    config.headers['token'] =  sessionStorage.token;\r\n    // console.log(config);\r\n\r\n    return config;\r\n}, function (error) {\r\n    // 发送失败 做的失败 \r\n    // failToast(\"请求失败\")\r\n    return Promise.reject(error);\r\n});\r\n\r\n// 响应数据 的拦截器 \r\naxios.interceptors.response.use(function (response) {\r\n    // 成功接收到数据 \r\n    // console.log(response);\r\n    setTimeout(()=>{\r\n        showToast(response.data.msg);\r\n        if(response.data.code==500){\r\n            // showAlert();\r\n        }\r\n    },500)\r\n    return response;\r\n}, function (error) {\r\n    // failToast(\"响应失败\");\r\n    // 无法接收到数据  \r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\nexport  {axios};\r\n\r\n"],"sourceRoot":""}