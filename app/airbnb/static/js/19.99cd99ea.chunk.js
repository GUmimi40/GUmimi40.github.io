(window.webpackJsonpairbnb=window.webpackJsonpairbnb||[]).push([[19],{257:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t),function(e,a){n.d(t,"default",(function(){return d}));var s=n(10),o=n(12),c=n(14),r=n(13),l=n(15),i=(n(257),n(6)),u=n(77),m=n(75),h=n(79),f=Object(i.a)((function(){return Promise.all([n.e(1),n.e(2),n.e(22)]).then(n.bind(null,129))})),p=h.f.alert,d=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(r.a)(t).call(this))).scroll=function(){var t=0,n=20;window.addEventListener("scroll",(function(){t=document.documentElement.scrollTop||document.body.scrollTop,n<=t?e.setState({toggle:!1}):e.setState({toggle:!0}),setTimeout((function(){n=t}),0)}))},e.chosen=function(t,n){var a=[];e.state.preview_tags.forEach((function(e,t){t==n&&(e.toggle=!e.toggle),1==e.toggle&&a.push(e.txt)})),u.a.post("/airbnb/house",{city:e.state.city}).then((function(t){var n=[];t.data.result.forEach((function(e,t){var s=[],o=[];e.preview_tags.forEach((function(e,t){t>0&&s.push(e.name)})),a.forEach((function(e,t){s.indexOf(e)>-1&&o.push(e)})),o.length==a.length&&n.push(e)})),n.length?e.setState({nohouses:!1}):e.setState({nohouses:!0}),e.setState({houses:n})}))},e.goback=function(){m.a.push("/index/tansuo")},e.gotoDetail=function(e){sessionStorage.houseid=e,m.a.push("/housedetail")},e.showModal=function(){e.setState({modal:!0})},e.toSearch=function(){m.a.push("/search")},e.state={city:"",preview_tags:[{txt:"\u8d85\u8d5e\u623f\u4e1c",toggle:!0},{txt:"\u53ef\u4ee5\u505a\u996d",toggle:!1},{txt:"\u8fd1\u5730\u94c1\u7ad9",toggle:!1},{txt:"\u9ad8\u6027\u4ef7\u6bd4",toggle:!1},{txt:"\u81ea\u52a9\u5165\u4f4f",toggle:!1}],houses:[],toggle:!0,nohouses:!1,modal:!1},e}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.setState({city:sessionStorage.city}),this.scroll()}},{key:"componentDidMount",value:function(){var e=this;scrollTo(0,0),u.a.post("/airbnb/house",{city:this.state.city}).then((function(t){if(t.data.result.length){var n=[];t.data.result.forEach((function(e,t){e.preview_tags.forEach((function(t,a){-1!=t.name.indexOf("\u8d85\u8d5e\u623f\u4e1c")&&n.push(e)}))})),e.setState({houses:n})}else e.showModal()}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.city,s=t.preview_tags,o=t.houses,c=t.toggle,r=t.nohouses;return a.createElement("div",{className:"houses_page"},a.createElement(h.f,{visible:this.state.modal,transparent:!0,maskClosable:!1,title:"\u627e\u4e0d\u5230\u60f3\u8981\u7684\u4f4f\u5bbf\u4f53\u9a8c",footer:[{text:"\u8fd4\u56de\u641c\u7d22\u9875",onPress:function(){return e.toSearch()}}],wrapProps:{onTouchStart:this.onWrapTouchStart},afterClose:function(){p("afterClose")}}),a.createElement("div",{className:"city_title"},a.createElement("div",{className:"wrapper"},a.createElement("i",{onClick:this.goback,className:"iconfont icon-back"}),a.createElement("span",null,n))),a.createElement("div",{className:"preview_tags",style:{top:c?"1rem":"0"}},a.createElement("div",{className:"wrapper"},a.createElement("ul",null,s.map((function(t,n){return a.createElement("li",{className:t.toggle?"on":"",key:n,onClick:function(){return e.chosen(t,n)}},t.txt)}))))),a.createElement("div",{className:"city_houses",style:{display:r?"":"none"}},a.createElement("h2",null,"\u627e\u4e0d\u5230\u6ee1\u8db3\u6761\u4ef6\u7684\u4f4f\u5bbf\u4f53\u9a8c")),a.createElement("div",{className:"city_houses",id:"house"},a.createElement("div",{className:"wrapper"},o.map((function(t,n){return a.createElement("div",{key:n,onClick:function(){return e.gotoDetail(t.id)},className:"one_houses"},a.createElement("img",{className:"house_picture",src:t.picture_url,alt:""}),a.createElement("div",{className:"house_txt"},a.createElement("img",{className:"user_picture",src:t.user.picture_url,alt:""}),a.createElement("div",{className:"house_body"},a.createElement("p",{className:"kicker_content"},t.kicker_content.messages.map((function(e,t){return a.createElement("span",{key:t},e)}))),a.createElement("h2",null,t.name),a.createElement("ul",{className:"house_tags"},t.preview_tags.map((function(e,t){return a.createElement("li",{className:0==t?"first":1==t?"second":"",key:t},e.name)})))),a.createElement("div",{className:"house_foot"},a.createElement("div",{className:"house_footer"},a.createElement("span",null,a.createElement("b",null,t.price),"\u6bcf\u665a"),a.createElement("span",null,t.location_context&&t.location_context.display_name)))))})))),a.createElement(f,null))}}]),t}(e)}.call(this,n(0).Component,n(0))},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=new(n(8).a)},77:function(e,t,n){"use strict";var a=n(78),s=n.n(a);n.d(t,"a",(function(){return s.a}));var o=n(79);n(75);s.a.defaults.baseURL="https://arthasic.top:6918";s.a.defaults.headers.common.token="",s.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";o.f.alert;s.a.interceptors.request.use((function(e){return e.headers.token=sessionStorage.token,e}),(function(e){return Promise.reject(e)})),s.a.interceptors.response.use((function(e){return setTimeout((function(){e.data.msg,e.data.code}),500),e}),(function(e){return Promise.reject(e)}))}}]);
//# sourceMappingURL=19.99cd99ea.chunk.js.map